<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <script src="lib/fdc3-compliance.js"></script>
    <pre id="stats"></pre>
    <pre id="results"></pre>
    <label>Select the FDC3 version to test:</label>
    <select name="version" id="version">
      <option value="2.0">2.0</option>
      <option value="1.2">1.2</option>
    </select>
    <button onclick="runTests()" id="testBtn">Run tests</button>
  </body>
  <script>
    function runTests() {
    const results = document.getElementById("results");
    const stats = document.getElementById("stats");
    let passCount = 0;
    let failCount = 0;
    let totalCount = 0;

    const updateStats = () => {
      stats.innerHTML = `Test results ${passCount}/${totalCount}`;
    };

    fdc3Compliance.initAllTests();

    fdc3Compliance.runTests({
      onStart: (runner) => {
        totalCount = runner.total;
        updateStats();
      },
      onPass: (test) => {
        results.innerHTML += `<br/>✅ Test passed: ${test.parent.title} / ${test.title}<br/>`;
        passCount++;
        updateStats();
      },
      onFail: (test) => {
        results.innerHTML += `<br />❌ Test failed: ${test.parent.title} / ${test.title}`;
        results.innerHTML += `<br />  ${test.err.message}<br/>`;
        failCount++;
        updateStats();
      },
    });
  }
  </script>
</html>
